{"version":3,"sources":["contexts/CurrentUserContext.js","components/TopBar/TopBar.jsx","components/BackendErrorMessages/BackendErrorMessages.jsx","hooks/useLocalStorage.js","hooks/useFetch.js","components/AddToFavorites/AddToFavorites.jsx","components/TagList/TagList.jsx","components/Feed/Feed.jsx","components/Pagination/Pagination.jsx","components/ArticleForm/ArticleForm.jsx","components/AddToFollowing/AddToFollowing.jsx","components/ErrorMessage/ErrorMessage.jsx","components/FeedToggler/FeedToggler.jsx","components/Loading/Loading.jsx","components/PopularTags/PopularTags.jsx","components/ArticleComments/components/postCommentForm/PostCommentForm.jsx","utils/index.js","components/ArticleComments/ArticleComments.jsx","components/ErrorBoundry/ErrorBoundry.js","utils/CurrentUserChecker.js","pages/articlePage/Article.jsx","pages/authenticationPage/Authentication.jsx","pages/createArticlePage/CreateArticle.jsx","pages/editArticlePage/EditArticle.jsx","pages/globalFeedPage/GlobalFeed.jsx","pages/settingsPage/Settings.jsx","pages/userProfilePage/components/userArticles/UserArticles.jsx","pages/userProfilePage/UserProfile.jsx","pages/globalFeedPage/TagFeed.jsx","App.js","index.js","pages/globalFeedPage/GlobalFeed.module.scss","components/Feed/Feed.module.scss","components/TopBar/TopBar.module.scss","components/ArticleForm/ArticleForm.module.scss","components/ArticleComments/ArticleComments.module.scss","components/FeedToggler/FeedToggler.module.scss","components/ArticleComments/components/postCommentForm/PostCommentForm.module.scss","pages/authenticationPage/Authentication.module.scss","components/AddToFavorites/AddToFavorites.module.scss","components/Pagination/Pagination.module.scss","components/AddToFollowing/AddToFollowing.module.scss","components/PopularTags/PopularTags.module.scss","components/TagList/TagList.module.scss","components/BackendErrorMessages/BackendErrorMessages.module.scss","pages/articlePage/Article.module.scss","pages/settingsPage/Settings.module.scss","pages/userProfilePage/UserProfile.module.scss"],"names":["initialState","isLoading","isLoggedIn","currentUser","reducer","state","action","type","loading","payload","CurrentUserContext","createContext","CurrentUserProvider","children","value","useReducer","Provider","TopBar","useContext","currentUserState","activeLink","color","className","s","navbar","to","logo","link","activeStyle","exact","username","src","image","alt","photo","BackendErrorMessages","backendError","errors","Object","entries","map","name","message","idx","useLocalStorage","key","initialValue","useState","localStorage","getItem","setValue","useEffect","setItem","useFetch","url","setIsLoading","error","setError","response","setResponse","options","setOptions","token","doFetch","useCallback","skipGetResponseAfterUnmount","requestOptions","headers","authorization","axios","then","res","data","catch","err","console","log","AddToFavorites","isFavorited","favoritesCount","articleSlug","hasLabel","apiUrl","history","useHistory","favoritesCountWithResponse","article","isFavoritedWithResponse","favorited","label","classnames","btn","btnGreen","btnFavorited","onClick","method","push","icon","defaultProps","TagList","tags","tagList","tag","Feed","articles","row","meta","author","info","date","createdAt","split","slug","title","description","more","PaginationItem","page","currentPage","classes","item","active","Pagination","total","limit","pagesCount","Math","ceil","pages","Array","fill","list","z","ArticleForm","initialValues","onSubmit","setTitle","setDescription","body","setBody","setTag","setTagList","form","e","preventDefault","placeholder","onChange","target","onKeyPress","code","indexOf","newTagList","slice","deleteTag","button","AddToFollowing","isFollowing","userSlug","isFollowingWithResponse","profile","following","btnFollowing","ErrorMessage","borderBottom","FeedToggler","tagName","path","feedBar","Loading","Tags","sidebar","tagsList","PostCommentForm","onAddedComment","hasError","setHasError","comment","postForm","postBody","postMeta","postImg","postBtn","notLogged","getPaginator","search","parsedSerch","parse","offset","isAuthor","ArticleComments","apiCommentsUrl","fetchCommentsResponse","fetchCommentsError","commentsLoading","getComments","comments","setComments","newComment","setNewComment","deletedCommentId","setDeletedCommentId","apiDeleteCommentUrl","deleteCommentResponse","doDeleteComment","filter","id","commentsPage","commentBody","commentMeta","img","delete","ErrorBoundry","this","setState","props","Component","CurrentUserChecker","dispatch","user","Article","match","isSuccessfullDelete","setIsSuccessfullDelete","params","fetchArticleResponse","deleteArticleResponse","doDeleteArticle","banner","buttons","btnRed","content","Authentication","isLogin","pageTitle","descrioptionLink","descrioptionText","email","setEmail","password","setPassword","setUsername","isSuccessfullSubmit","setIsSuccessfullSubmit","setToken","auth","ref","input","submit","disabled","CreateArticle","EditArticle","setInitialValues","doArticleFetch","updateArticleResponse","updateArticleError","doUpdateArticle","GlobalFeed","location","stringifyParams","stringify","homepage","left","articlesCount","PopularTags","Settings","setImage","bio","setBio","settings","imageUrl","logout","UserArticles","isFavorites","pathname","UserProfile","includes","userPhoto","btnEdit","toggler","links","li","TagFeed","App","component","render","ReactDOM","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.839060cf.chunk.js","sourcesContent":["import React, { createContext, useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  isLoggedIn: null,\r\n  currentUser: null,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOADING':\r\n      return { ...state, loading: true };\r\n    case 'SET_AUTHORIZED':\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        isLoggedIn: true,\r\n        currentUser: action.payload,\r\n      };\r\n    case 'SET_UNAUTHORIZED':\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n      };\r\n    case 'LOGOUT':\r\n      return {\r\n        ...initialState,\r\n        isLoggedIn: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const CurrentUserContext = createContext();\r\n\r\nexport const CurrentUserProvider = ({ children }) => {\r\n  const value = useReducer(reducer, initialState);\r\n\r\n  return <CurrentUserContext.Provider value={value}>{children}</CurrentUserContext.Provider>;\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\n\r\nimport s from './TopBar.module.scss';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nconst TopBar = () => {\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n\r\n  const activeLink = {\r\n    color: '#000',\r\n  };\r\n\r\n  return (\r\n    <nav className={s.navbar}>\r\n      <Link to=\"/\" className={s.logo}>\r\n        Medium\r\n      </Link>\r\n\r\n      <NavLink to=\"/\" className={s.link} activeStyle={activeLink} exact>\r\n        Home\r\n      </NavLink>\r\n      {currentUserState.isLoggedIn === false && (\r\n        <>\r\n          <NavLink to=\"/login\" className={s.link} activeStyle={activeLink}>\r\n            Sign in\r\n          </NavLink>\r\n          <NavLink to=\"/register\" className={s.link} activeStyle={activeLink}>\r\n            Sign up\r\n          </NavLink>\r\n        </>\r\n      )}\r\n      {currentUserState.isLoggedIn && (\r\n        <>\r\n          <NavLink to=\"/articles/new\" className={s.link} activeStyle={activeLink}>\r\n            <i className=\"far fa-edit\"></i>\r\n            New Post\r\n          </NavLink>\r\n          <NavLink to=\"/settings\" className={s.link} activeStyle={activeLink}>\r\n            <i className=\"fas fa-cog\"></i>\r\n            Settings\r\n          </NavLink>\r\n          <NavLink\r\n            to={`/profiles/${currentUserState.currentUser.username}`}\r\n            className={s.link}\r\n            activeStyle={activeLink}>\r\n            <img src={currentUserState.currentUser.image} alt=\"\" className={s.photo} />\r\n            {currentUserState.currentUser.username}\r\n          </NavLink>\r\n        </>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default TopBar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './BackendErrorMessages.module.scss';\r\n\r\nconst BackendErrorMessages = ({ backendError }) => {\r\n  return (\r\n    <ul className={s.errors}>\r\n      {Object.entries(backendError).map(([name, messages]) => {\r\n        return messages.map((message, idx) => (\r\n          <li key={name + idx}>\r\n            {name} {message}\r\n          </li>\r\n        ));\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nBackendErrorMessages.propTypes = {\r\n  backendError: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default BackendErrorMessages;\r\n","import { useEffect, useState } from 'react';\r\n\r\nconst useLocalStorage = (key, initialValue = '') => {\r\n  const [value, setValue] = useState(() => {\r\n    return localStorage.getItem(key) || initialValue;\r\n  });\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(key, value);\r\n  }, [value, key]);\r\n\r\n  return [value, setValue];\r\n};\r\n\r\nexport default useLocalStorage;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport useLocalStorage from './useLocalStorage';\r\n\r\nconst useFetch = (url) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [response, setResponse] = useState(null);\r\n  const [options, setOptions] = useState({});\r\n  const [token] = useLocalStorage('token');\r\n\r\n  const doFetch = useCallback((options = {}) => {\r\n    setOptions(options);\r\n    setIsLoading(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let skipGetResponseAfterUnmount = false;\r\n\r\n    if (isLoading) {\r\n      const requestOptions = {\r\n        ...options,\r\n        headers: {\r\n          authorization: token ? `Token ${token}` : '',\r\n        },\r\n      };\r\n\r\n      axios(`https://conduit.productionready.io/api${url}`, requestOptions)\r\n        .then((res) => {\r\n          if (!skipGetResponseAfterUnmount) {\r\n            setResponse(res.data);\r\n            setIsLoading(false);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          if (!skipGetResponseAfterUnmount) {\r\n            setError(err.response.data);\r\n            setIsLoading(false);\r\n          }\r\n          console.log('error', err);\r\n        });\r\n    }\r\n\r\n    return () => {\r\n      skipGetResponseAfterUnmount = true;\r\n    };\r\n  }, [isLoading, url, options, token]);\r\n\r\n  return [{ isLoading, error, response }, doFetch];\r\n};\r\n\r\nexport default useFetch;\r\n","import React, { useContext } from 'react';\r\nimport classnames from 'classnames';\r\nimport { useHistory } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './AddToFavorites.module.scss';\r\nimport useFetch from '../../hooks/useFetch';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nconst AddToFavorites = ({ isFavorited, favoritesCount, articleSlug, hasLabel }) => {\r\n  const apiUrl = `/articles/${articleSlug}/favorite`;\r\n  const [{ response }, doFetch] = useFetch(apiUrl);\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n  const history = useHistory();\r\n\r\n  const favoritesCountWithResponse = response ? response.article.favoritesCount : favoritesCount;\r\n  const isFavoritedWithResponse = response ? response.article.favorited : isFavorited;\r\n  const label = hasLabel\r\n    ? `${\r\n        isFavoritedWithResponse ? 'Unfavorite' : 'Favorite'\r\n      } Article (${favoritesCountWithResponse})`\r\n    : favoritesCountWithResponse;\r\n\r\n  const handleClick = () => {\r\n    if (currentUserState.isLoggedIn === false) {\r\n      history.push('/login');\r\n      return;\r\n    }\r\n\r\n    doFetch({\r\n      method: isFavoritedWithResponse ? 'delete' : 'post',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className={classnames(s.btn, s.btnGreen, { [s.btnFavorited]: isFavoritedWithResponse })}\r\n      onClick={handleClick}>\r\n      <i className={classnames('fas fa-heart', s.icon)}></i>\r\n      {label}\r\n    </button>\r\n  );\r\n};\r\n\r\nAddToFavorites.propTypes = {\r\n  isFavorited: PropTypes.bool,\r\n  favoritesCount: PropTypes.number.isRequired,\r\n  articleSlug: PropTypes.string.isRequired,\r\n  hasLabel: PropTypes.bool,\r\n};\r\n\r\nAddToFavorites.defaultProps = {\r\n  isFavorited: false,\r\n  hasLabel: false,\r\n};\r\n\r\nexport default AddToFavorites;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './TagList.module.scss';\r\n\r\nconst TagList = ({ tags }) => {\r\n  return (\r\n    <ul className={s.tagList}>\r\n      {tags.map((tag) => (\r\n        <li className={s.tag} key={tag}>\r\n          {tag}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nTagList.propTypes = {\r\n  tags: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\r\n};\r\n\r\nexport default TagList;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport AddToFavorites from '../AddToFavorites/AddToFavorites';\r\nimport TagList from '../TagList/TagList';\r\n\r\nimport s from './Feed.module.scss';\r\n\r\nconst Feed = ({ articles = [] }) => {\r\n  return (\r\n    <div>\r\n      {articles.map((article, idx) => {\r\n        return (\r\n          <div className={s.article} key={idx}>\r\n            <div className={s.row}>\r\n              <div className={s.meta}>\r\n                <Link to={`/profiles/${article.author.username}`} className={s.photo}>\r\n                  <img src={article.author.image} alt=\"\" />\r\n                </Link>\r\n                <div className={s.info}>\r\n                  <Link to={`/profiles/${article.author.username}`} className={s.author}>\r\n                    <span>{article.author.username}</span>\r\n                  </Link>\r\n                  <span className={s.date}>{article.createdAt.split('T')[0]}</span>\r\n                </div>\r\n              </div>\r\n              <AddToFavorites\r\n                favoritesCount={article.favoritesCount}\r\n                isFavorited={article.favorited}\r\n                articleSlug={article.slug}\r\n                hasLabel={false}\r\n              />\r\n            </div>\r\n\r\n            <Link to={`/articles/${article.slug}`}>\r\n              <h1 className={s.title}>{article.title}</h1>\r\n              <p className={s.description}>{article.description}</p>\r\n              <span className={s.more}>Read more...</span>\r\n              <TagList tags={article.tagList} />\r\n            </Link>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nFeed.propTypes = {\r\n  articles: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\r\n};\r\n\r\nexport default Feed;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport s from './Pagination.module.scss';\r\n\r\nconst PaginationItem = ({ page, currentPage, url }) => {\r\n  const classes = classnames(s.item, { [s.active]: currentPage === page });\r\n\r\n  return (\r\n    <li className={classes}>\r\n      <Link to={`${url}?page=${page}`} className={s.link}>\r\n        {page}\r\n      </Link>\r\n    </li>\r\n  );\r\n};\r\n\r\nconst Pagination = ({ total, limit, url, currentPage }) => {\r\n  const pagesCount = Math.ceil(total / limit);\r\n  const pages = Array(pagesCount).fill(1);\r\n\r\n  if (pagesCount < 2) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ul className={s.list}>\r\n        {pages.map((z, idx) => (\r\n          <PaginationItem currentPage={currentPage} page={idx + 1} url={url} key={idx} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nPaginationItem.propTypes = {\r\n  page: PropTypes.number.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n};\r\n\r\nPagination.propTypes = {\r\n  total: PropTypes.number.isRequired,\r\n  limit: PropTypes.number.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default Pagination;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport BackendErrorMessages from '../BackendErrorMessages/BackendErrorMessages';\r\n\r\nimport s from './ArticleForm.module.scss';\r\n\r\nconst ArticleForm = ({ initialValues, errors, onSubmit }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [body, setBody] = useState('');\r\n  const [tag, setTag] = useState('');\r\n  const [tagList, setTagList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (initialValues) {\r\n      setTitle(initialValues.title);\r\n      setDescription(initialValues.description);\r\n      setBody(initialValues.body);\r\n      setTagList(initialValues.tagList);\r\n    }\r\n  }, [initialValues]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit({ title, description, body, tagList });\r\n  };\r\n\r\n  const handleEnterTag = (e) => {\r\n    if (e.code !== 'Enter') {\r\n      return;\r\n    }\r\n\r\n    e.preventDefault();\r\n    setTag('');\r\n    if (tagList.indexOf(tag) >= 0) {\r\n      return;\r\n    }\r\n    setTagList([...tagList, e.target.value]);\r\n  };\r\n\r\n  const deleteTag = (idx) => {\r\n    const newTagList = [...tagList.slice(0, idx), ...tagList.slice(idx + 1)];\r\n    setTagList(newTagList);\r\n  };\r\n\r\n  return (\r\n    <div className={s.page}>\r\n      {errors && <BackendErrorMessages backendError={errors} />}\r\n      <form className={s.form} onSubmit={handleSubmit}>\r\n        <input\r\n          className={s.title}\r\n          type=\"text\"\r\n          placeholder=\"Article Title\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n        />\r\n        <input\r\n          className={s.description}\r\n          type=\"text\"\r\n          placeholder=\"What's this article about?\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n        <textarea\r\n          className={s.body}\r\n          placeholder=\"Write your article\"\r\n          value={body}\r\n          onChange={(e) => setBody(e.target.value)}\r\n        />\r\n        <input\r\n          className={s.tags}\r\n          type=\"text\"\r\n          placeholder=\"Enter tags\"\r\n          value={tag}\r\n          onChange={(e) => setTag(e.target.value)}\r\n          onKeyPress={handleEnterTag}\r\n        />\r\n\r\n        <ul className={s.tagList}>\r\n          {tagList.map((tag, idx) => (\r\n            <li className={s.tag} key={tag + idx}>\r\n              <i className=\"fas fa-times\" onClick={() => deleteTag(idx)}></i>\r\n              {tag}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        <input\r\n          className={s.button}\r\n          type=\"submit\"\r\n          placeholder=\"Article Title\"\r\n          value=\"Publish Article\"\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nArticleForm.propTypes = {\r\n  initialValues: PropTypes.object,\r\n  onSubmit: PropTypes.func.isRequired,\r\n  errors: PropTypes.object,\r\n};\r\n\r\nexport default ArticleForm;\r\n","import React, { useContext } from 'react';\r\nimport classnames from 'classnames';\r\nimport { useHistory } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './AddToFollowing.module.scss';\r\nimport useFetch from '../../hooks/useFetch';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nconst AddToFollowing = ({ isFollowing, userSlug }) => {\r\n  const apiUrl = `/profiles/${userSlug}/follow`;\r\n  const [{ response }, doFetch] = useFetch(apiUrl);\r\n  const history = useHistory();\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n\r\n  const isFollowingWithResponse = response ? response.profile.following : isFollowing;\r\n\r\n  const handleClick = () => {\r\n    if (currentUserState.isLoggedIn === false) {\r\n      history.push('/login');\r\n      return;\r\n    }\r\n\r\n    doFetch({\r\n      method: isFollowingWithResponse ? 'delete' : 'post',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={handleClick}\r\n      className={classnames(s.btn, { [s.btnFollowing]: isFollowingWithResponse })}>\r\n      <i className={classnames('fas fa-plus', s.icon)}></i>\r\n      {`${isFollowingWithResponse ? 'Unfollow' : 'Follow'} ${userSlug}`}\r\n    </button>\r\n  );\r\n};\r\n\r\nAddToFollowing.propTypes = {\r\n  isFollowing: PropTypes.bool.isRequired,\r\n  userSlug: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default AddToFollowing;\r\n","import React from 'react';\r\n\r\nconst ErrorMessage = () => {\r\n  return <div>Some error has occured</div>;\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import React, { useContext } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './FeedToggler.module.scss';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nconst activeStyle = { borderBottom: '2px solid green', color: 'green' };\r\n\r\nconst FeedToggler = ({ tagName }) => {\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n  const path = currentUserState.isLoggedIn ? '/feed' : '/login';\r\n\r\n  return (\r\n    <div className={s.feedBar}>\r\n      <ul className={s.list}>\r\n        <li className={s.item}>\r\n          <NavLink to={path} className={s.link} activeStyle={activeStyle}>\r\n            Your Feed\r\n          </NavLink>\r\n        </li>\r\n\r\n        <li className={s.item}>\r\n          <NavLink to=\"/\" className={s.link} activeStyle={activeStyle} exact>\r\n            Global Feed\r\n          </NavLink>\r\n        </li>\r\n\r\n        {tagName && (\r\n          <li className={s.item}>\r\n            <NavLink to={`/tags/${tagName}`} activeStyle={activeStyle} className={s.link} exact>\r\n              #{tagName}\r\n            </NavLink>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nFeedToggler.propTypes = {\r\n  tagName: PropTypes.string,\r\n};\r\n\r\nexport default FeedToggler;\r\n","import React from 'react';\r\n\r\nimport './Loading.css';\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div className=\"loadingio-spinner-double-ring-urzqixydvu\">\r\n      <div className=\"ldio-cpz8mm576tv\">\r\n        <div></div>\r\n        <div></div>\r\n        <div>\r\n          <div></div>\r\n        </div>\r\n        <div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect } from 'react';\r\n\r\nimport s from './PopularTags.module.scss';\r\n\r\nimport useFetch from '../../hooks/useFetch';\r\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\r\nimport Loading from '../Loading/Loading';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Tags = () => {\r\n  const apiUrl = '/tags';\r\n  const [{ response, error, isLoading }, doFetch] = useFetch(apiUrl);\r\n\r\n  useEffect(() => {\r\n    doFetch();\r\n  }, [doFetch]);\r\n\r\n  if (error) {\r\n    return <ErrorMessage />;\r\n  }\r\n\r\n  if (isLoading || !response) {\r\n    return <Loading />;\r\n  }\r\n\r\n  return (\r\n    <div className={s.sidebar}>\r\n      <p>Popular tags</p>\r\n      <div className={s.tagsList}>\r\n        {response.tags.map((tag, idx) => (\r\n          <Link to={`/tags/${tag}`} key={tag + idx} className={s.item}>\r\n            {tag}\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport s from './PostCommentForm.module.scss';\r\n\r\nimport useFetch from '../../../../hooks/useFetch';\r\nimport { BackendErrorMessages } from '../../../';\r\n\r\nconst PostCommentForm = ({ onAddedComment, articleSlug, currentUser }) => {\r\n  const apiUrl = `/articles/${articleSlug}/comments`;\r\n  const [{ response, error }, doFetch] = useFetch(apiUrl);\r\n  const [body, setBody] = useState('');\r\n  const [hasError, setHasError] = useState(false);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    doFetch({\r\n      method: 'post',\r\n      data: {\r\n        comment: {\r\n          body,\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (response) {\r\n      setBody('');\r\n      onAddedComment(response.comment);\r\n      setHasError(false);\r\n    }\r\n  }, [response, onAddedComment]);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      setHasError(true);\r\n    }\r\n  }, [error]);\r\n\r\n  if (!currentUser.isLoggedIn) {\r\n    return (\r\n      <div className={s.notLogged}>\r\n        <Link to=\"/login\" className={s.link}>\r\n          Sign in\r\n        </Link>{' '}\r\n        or{' '}\r\n        <Link to=\"/register\" className={s.link}>\r\n          {' '}\r\n          sign up{' '}\r\n        </Link>\r\n        to add comments on this article.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {hasError && <BackendErrorMessages backendError={error.errors} />}\r\n      <form className={s.postForm} onSubmit={handleSubmit}>\r\n        <textarea\r\n          className={s.postBody}\r\n          placeholder=\"Write a comment...\"\r\n          value={body}\r\n          onChange={(e) => setBody(e.target.value)}\r\n        />\r\n        <div className={s.postMeta}>\r\n          <img src={currentUser.currentUser.image} alt=\"1\" className={s.postImg} />\r\n          <input type=\"submit\" className={s.postBtn} value=\"Post Comment\" />\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nPostCommentForm.propTypes = {\r\n  articleSlug: PropTypes.string.isRequired,\r\n  onAddedComment: PropTypes.func.isRequired,\r\n  currentUser: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PostCommentForm;\r\n","import { parse } from 'query-string';\r\n\r\nexport const limit = 10;\r\n\r\nexport const getPaginator = (search) => {\r\n  const parsedSerch = parse(search);\r\n  const currentPage = parsedSerch.page ? +parsedSerch.page : 1;\r\n  const offset = (currentPage - 1) * limit;\r\n\r\n  return { currentPage, offset };\r\n};\r\n\r\nexport const isAuthor = (currentUserState, username) => {\r\n  if (!currentUserState.isLoggedIn) {\r\n    return false;\r\n  }\r\n\r\n  return currentUserState.currentUser.username === username;\r\n};\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport s from './ArticleComments.module.scss';\r\n\r\nimport useFetch from '../../hooks/useFetch';\r\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\r\nimport Loading from '../Loading/Loading';\r\nimport PostCommentForm from './components/postCommentForm/PostCommentForm';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { isAuthor } from '../../utils';\r\n\r\nconst ArticleComments = ({ articleSlug }) => {\r\n  const apiCommentsUrl = `/articles/${articleSlug}/comments`;\r\n  const [\r\n    { response: fetchCommentsResponse, error: fetchCommentsError, loading: commentsLoading },\r\n    getComments,\r\n  ] = useFetch(apiCommentsUrl);\r\n\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState(null);\r\n  const [deletedCommentId, setDeletedCommentId] = useState(null);\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n\r\n  const apiDeleteCommentUrl = `/articles/${articleSlug}/comments/${deletedCommentId}`;\r\n  const [{ response: deleteCommentResponse }, doDeleteComment] = useFetch(apiDeleteCommentUrl);\r\n\r\n  useEffect(() => {\r\n    getComments();\r\n  }, [getComments]);\r\n\r\n  useEffect(() => {\r\n    if (fetchCommentsResponse) {\r\n      setComments(fetchCommentsResponse.comments);\r\n    }\r\n  }, [fetchCommentsResponse]);\r\n\r\n  useEffect(() => {\r\n    if (newComment) {\r\n      setComments((comments) => [newComment, ...comments]);\r\n    }\r\n  }, [setComments, newComment]);\r\n\r\n  useEffect(() => {\r\n    if (deletedCommentId === null) {\r\n      return;\r\n    }\r\n    doDeleteComment({\r\n      method: 'delete',\r\n    });\r\n  }, [doDeleteComment, deletedCommentId]);\r\n\r\n  //?\r\n  useEffect(() => {\r\n    if (deleteCommentResponse) {\r\n      setComments((comments) => comments.filter(({ id }) => id !== deletedCommentId));\r\n    }\r\n  }, [deleteCommentResponse]);\r\n\r\n  return (\r\n    <div className={s.commentsPage}>\r\n      <PostCommentForm\r\n        onAddedComment={setNewComment}\r\n        articleSlug={articleSlug}\r\n        currentUser={currentUserState}\r\n      />\r\n      {fetchCommentsError && <ErrorMessage />}\r\n      {(commentsLoading || !fetchCommentsResponse) && <Loading />}\r\n      {!commentsLoading && fetchCommentsResponse && (\r\n        <ul className={s.comments}>\r\n          {comments.map(({ body, id, createdAt, author: { username, image } }) => (\r\n            <li key={id} className={s.comment}>\r\n              <div className={s.commentBody}>{body}</div>\r\n              <div className={s.commentMeta}>\r\n                <Link to={`/profiles/${username}`}>\r\n                  <img src={image} alt=\"2\" className={s.img} />\r\n                </Link>\r\n                <Link to={`/profiles/${username}`} className={s.name}>\r\n                  {username}\r\n                </Link>\r\n                <span className={s.date}>{createdAt.split('T')[0]}</span>\r\n                {isAuthor(currentUserState, username) && (\r\n                  <span className={s.delete} onClick={() => setDeletedCommentId(id)}>\r\n                    <i className=\"fas fa-trash-alt\"></i>\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nArticleComments.propTypes = {\r\n  articleSlug: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ArticleComments;\r\n","import React, { Component } from 'react';\r\n\r\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    hasError: false,\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorMessage />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","import { useEffect, useContext } from 'react';\r\n\r\nimport useFetch from '../hooks/useFetch';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport useLocalStorage from '../hooks/useLocalStorage';\r\n\r\nconst CurrentUserChecker = ({ children }) => {\r\n  const [{ response }, doFetch] = useFetch('/user');\r\n  const [, dispatch] = useContext(CurrentUserContext);\r\n  const [token] = useLocalStorage('token');\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      dispatch({ type: 'SET_UNAUTHORIZED' });\r\n      return;\r\n    }\r\n\r\n    doFetch();\r\n    dispatch({ type: 'LOADING' });\r\n  }, [token, dispatch, doFetch]);\r\n\r\n  useEffect(() => {\r\n    if (response) {\r\n      dispatch({ type: 'SET_AUTHORIZED', payload: response.user });\r\n    }\r\n  }, [response, dispatch]);\r\n\r\n  return children;\r\n};\r\n\r\nexport default CurrentUserChecker;\r\n","import React, { useEffect, useContext, useState } from 'react';\r\nimport classnames from 'classnames';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Article.module.scss';\r\n\r\nimport useFetch from '../../hooks/useFetch';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport {\r\n  AddToFollowing,\r\n  AddToFavorites,\r\n  ErrorMessage,\r\n  TagList,\r\n  Loading,\r\n  ArticleComments,\r\n} from '../../components';\r\nimport { isAuthor } from '../../utils';\r\n\r\nconst Article = ({ match }) => {\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n  const [isSuccessfullDelete, setIsSuccessfullDelete] = useState(false);\r\n\r\n  const slug = match.params.slug;\r\n  const apiUrl = `/articles/${slug}`;\r\n  const [{ response: fetchArticleResponse, error, isLoading }, doFetch] = useFetch(apiUrl);\r\n  const [{ response: deleteArticleResponse }, doDeleteArticle] = useFetch(apiUrl);\r\n\r\n  useEffect(() => {\r\n    doFetch();\r\n  }, [doFetch]);\r\n\r\n  useEffect(() => {\r\n    if (deleteArticleResponse) {\r\n      setIsSuccessfullDelete(true);\r\n    }\r\n  }, [deleteArticleResponse]);\r\n\r\n  const handleDeleteArticle = () => {\r\n    doDeleteArticle({\r\n      method: 'DELETE',\r\n    });\r\n  };\r\n\r\n  if (error) {\r\n    return <ErrorMessage />;\r\n  }\r\n\r\n  if (isLoading || !fetchArticleResponse) {\r\n    return <Loading />;\r\n  }\r\n\r\n  if (isSuccessfullDelete) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  const {\r\n    title,\r\n    createdAt,\r\n    tagList,\r\n    body,\r\n    favoritesCount,\r\n    favorited,\r\n    author: { username, image, following },\r\n  } = fetchArticleResponse.article;\r\n\r\n  return (\r\n    <div className={s.page}>\r\n      <div className={s.banner}>\r\n        <h1 className={s.title}>{title}</h1>\r\n        <div className={s.row}>\r\n          <div className={s.meta}>\r\n            <Link to={`/profiles/${username}`} className={s.photo}>\r\n              <img src={image} alt=\"\" />\r\n            </Link>\r\n            <div className={s.info}>\r\n              <Link to={`/profiles/${username}`} className={s.author}>\r\n                {username}\r\n              </Link>\r\n              <span className={s.date}>{createdAt.split('T')[0]}</span>\r\n            </div>\r\n          </div>\r\n          {isAuthor(currentUserState, username) ? (\r\n            <div className={s.buttons}>\r\n              <Link to={`/articles/${slug}/edit`} className={s.btn}>\r\n                <i className={classnames('fas fa-pencil-alt', s.icon)}></i>\r\n                Edit Article\r\n              </Link>\r\n              <button className={classnames(s.btn, s.btnRed)} onClick={handleDeleteArticle}>\r\n                <i className={classnames('fas fa-trash-alt', s.icon)}></i>\r\n                Delete Article\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className={s.buttons}>\r\n              <AddToFollowing isFollowing={following} userSlug={username} />\r\n              <AddToFavorites\r\n                favoritesCount={favoritesCount}\r\n                isFavorited={favorited}\r\n                articleSlug={slug}\r\n                hasLabel\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className={s.content}>\r\n        <div>\r\n          <p className={s.body}>{body}</p>\r\n        </div>\r\n        <TagList tags={tagList} />\r\n      </div>\r\n\r\n      <ArticleComments articleSlug={slug} />\r\n    </div>\r\n  );\r\n};\r\n\r\nArticle.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Article;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Authentication.module.scss';\r\n\r\nimport useFetch from '../../hooks/useFetch';\r\nimport useLocalStorage from '../../hooks/useLocalStorage';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { BackendErrorMessages } from '../../components';\r\n\r\nconst Authentication = ({ match }) => {\r\n  const isLogin = match.path === '/login';\r\n\r\n  const pageTitle = isLogin ? 'Sign In' : 'Sign Up';\r\n  const descrioptionLink = isLogin ? '/register' : '/login';\r\n  const descrioptionText = isLogin ? 'Need an account?' : 'Have an account?';\r\n  const apiUrl = isLogin ? '/users/login' : '/users';\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [isSuccessfullSubmit, setIsSuccessfullSubmit] = useState(false);\r\n  const [{ isLoading, response, error }, doFetch] = useFetch(apiUrl);\r\n  const [, setToken] = useLocalStorage('token');\r\n  const [, dispatch] = useContext(CurrentUserContext);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const user = isLogin ? { email, password } : { username, email, password };\r\n\r\n    doFetch({\r\n      method: 'post',\r\n      data: {\r\n        user,\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (response) {\r\n      setToken(response.user.token);\r\n      setIsSuccessfullSubmit(true);\r\n      setUsername('');\r\n      setEmail('');\r\n      setPassword('');\r\n      dispatch({ type: 'SET_AUTHORIZED', payload: response.user });\r\n    }\r\n  }, [response, setToken, dispatch]);\r\n\r\n  if (isSuccessfullSubmit) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div className={s.auth}>\r\n      <h1 className={s.title}>{pageTitle}</h1>\r\n      <Link to={descrioptionLink} className={s.ref}>\r\n        {descrioptionText}\r\n      </Link>\r\n      <form className={s.form} onSubmit={handleSubmit}>\r\n        {error && <BackendErrorMessages backendError={error.errors} />}\r\n        {!isLogin && (\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Username\"\r\n            className={s.input}\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n          />\r\n        )}\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          className={s.input}\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          className={s.input}\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button type=\"submit\" className={classnames(s.submit)} disabled={isLoading}>\r\n          {pageTitle}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nAuthentication.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Authentication;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { ArticleForm } from '../../components';\r\nimport useFetch from '../../hooks/useFetch';\r\n\r\nconst initialValues = {\r\n  title: '',\r\n  body: '',\r\n  description: '',\r\n  tagList: [],\r\n};\r\n\r\nconst CreateArticle = () => {\r\n  const [{ response, error }, doFetch] = useFetch('/articles');\r\n  const [isSuccessfullSubmit, setIsSuccessfullSubmit] = useState(false);\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n\r\n  const onSubmit = (article) => {\r\n    doFetch({\r\n      method: 'post',\r\n      data: {\r\n        article,\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (response) {\r\n      setIsSuccessfullSubmit(true);\r\n    }\r\n  }, [response]);\r\n\r\n  if (currentUserState.isLoggedIn === false) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  if (isSuccessfullSubmit) {\r\n    return <Redirect to={`/articles/${response.article.slug}`} />;\r\n  }\r\n\r\n  return (\r\n    <ArticleForm errors={error && error.errors} initialValues={initialValues} onSubmit={onSubmit} />\r\n  );\r\n};\r\n\r\nexport default CreateArticle;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { ArticleForm } from '../../components';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport useFetch from '../../hooks/useFetch';\r\n\r\nconst EditArticle = ({ match }) => {\r\n  const [isSuccessfullSubmit, setIsSuccessfullSubmit] = useState(false);\r\n  const [initialValues, setInitialValues] = useState(null);\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n\r\n  const apiUrl = `/articles/${match.params.slug}`;\r\n  const [{ response: fetchArticleResponse }, doArticleFetch] = useFetch(apiUrl);\r\n  const [\r\n    { response: updateArticleResponse, error: updateArticleError },\r\n    doUpdateArticle,\r\n  ] = useFetch(apiUrl);\r\n\r\n  useEffect(() => {\r\n    doArticleFetch();\r\n  }, [doArticleFetch]);\r\n\r\n  useEffect(() => {\r\n    if (!fetchArticleResponse) {\r\n      return;\r\n    }\r\n\r\n    setInitialValues({\r\n      title: fetchArticleResponse.article.title,\r\n      description: fetchArticleResponse.article.description,\r\n      body: fetchArticleResponse.article.body,\r\n      tagList: fetchArticleResponse.article.tagList,\r\n    });\r\n  }, [fetchArticleResponse]);\r\n\r\n  useEffect(() => {\r\n    if (updateArticleResponse) {\r\n      setIsSuccessfullSubmit(true);\r\n    }\r\n  }, [updateArticleResponse]);\r\n\r\n  const onSubmit = (article) => {\r\n    doUpdateArticle({\r\n      method: 'put',\r\n      data: {\r\n        article,\r\n      },\r\n    });\r\n  };\r\n\r\n  if (currentUserState.isLoggedIn === false) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  if (isSuccessfullSubmit) {\r\n    return <Redirect to={`/articles/${updateArticleResponse.article.slug}`} />;\r\n  }\r\n\r\n  return (\r\n    <ArticleForm\r\n      errors={updateArticleError && updateArticleError.errors}\r\n      initialValues={initialValues}\r\n      onSubmit={onSubmit}\r\n    />\r\n  );\r\n};\r\n\r\nEditArticle.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default EditArticle;\r\n","import React, { useEffect } from 'react';\r\nimport { stringify } from 'query-string';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './GlobalFeed.module.scss';\r\n\r\nimport {\r\n  Feed,\r\n  Pagination,\r\n  PopularTags,\r\n  ErrorMessage,\r\n  FeedToggler,\r\n  Loading,\r\n} from '../../components';\r\nimport useFetch from '../../hooks/useFetch';\r\nimport { getPaginator, limit } from '../../utils';\r\n\r\nconst GlobalFeed = ({ location, match }) => {\r\n  const { offset, currentPage } = getPaginator(location.search);\r\n  const stringifyParams = stringify({ limit, offset });\r\n\r\n  const apiUrl = `/articles${match.path === '/feed' ? '/feed' : ''}?${stringifyParams}`;\r\n  const [{ response, isLoading, error }, doFetch] = useFetch(apiUrl);\r\n\r\n  useEffect(() => {\r\n    doFetch();\r\n  }, [doFetch, currentPage, apiUrl]);\r\n\r\n  return (\r\n    <div className={s.homepage}>\r\n      <div className={s.banner}>\r\n        <h1 className={s.title}>Medium clone</h1>\r\n        <p>A place to share knowledge</p>\r\n      </div>\r\n\r\n      <div className={s.content}>\r\n        <div className={s.left}>\r\n          <FeedToggler />\r\n          <div className={s.articles}>\r\n            {isLoading && <Loading />}\r\n            {error && <ErrorMessage />}\r\n            {!isLoading && response && (\r\n              <>\r\n                <Feed articles={response.articles} />\r\n                <Pagination\r\n                  total={response.articlesCount}\r\n                  limit={limit}\r\n                  url={match.url}\r\n                  currentPage={currentPage}\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <PopularTags />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nGlobalFeed.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default GlobalFeed;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\n\r\nimport s from './Settings.module.scss';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport useFetch from '../../hooks/useFetch';\r\nimport useLocalStorage from '../../hooks/useLocalStorage';\r\nimport { BackendErrorMessages } from '../../components';\r\n\r\nconst Settings = () => {\r\n  const [currentUserState, dispatch] = useContext(CurrentUserContext);\r\n  const [, setToken] = useLocalStorage('token');\r\n  const [isSuccessfullSubmit, setIsSuccessfullSubmit] = useState(false);\r\n\r\n  const [image, setImage] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [bio, setBio] = useState(null);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const [{ response, error }, doFetch] = useFetch('/user');\r\n\r\n  const handleSumbit = (e) => {\r\n    e.preventDefault();\r\n\r\n    doFetch({\r\n      method: 'put',\r\n      data: {\r\n        user: {\r\n          ...currentUserState.currentUser,\r\n          image,\r\n          username,\r\n          bio,\r\n          email,\r\n          password,\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  const logout = () => {\r\n    setToken('');\r\n    dispatch({ type: 'LOGOUT' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentUserState.currentUser) {\r\n      const user = currentUserState.currentUser;\r\n      setImage(user.image);\r\n      setUsername(user.username);\r\n      setBio(user.bio);\r\n      setEmail(user.email);\r\n    }\r\n  }, [currentUserState]);\r\n\r\n  useEffect(() => {\r\n    if (response) {\r\n      setIsSuccessfullSubmit(true);\r\n      dispatch({ type: 'SET_AUTHORIZED', payload: response.user });\r\n    }\r\n  }, [response, dispatch]);\r\n\r\n  if (currentUserState.isLoggedIn === false) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  if (isSuccessfullSubmit) {\r\n    return <Redirect to={`/profiles/${username}`} />;\r\n  }\r\n\r\n  return (\r\n    <div className={s.settings}>\r\n      <h1 className={s.title}>Your Settings</h1>\r\n      {error && <BackendErrorMessages backendError={error.errors} />}\r\n      <form className={s.form} onSubmit={handleSumbit}>\r\n        <input\r\n          type=\"text\"\r\n          value={image}\r\n          onChange={(e) => setImage(e.target.value)}\r\n          className={classnames(s.input, s.imageUrl)}\r\n          placeholder=\"URL of profile picture\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          className={classnames(s.input, s.username)}\r\n          placeholder=\"Username\"\r\n        />\r\n        <textarea\r\n          value={bio || ''}\r\n          onChange={(e) => setBio(e.target.value)}\r\n          className={classnames(s.input, s.bio)}\r\n          placeholder=\"Short bio about you\"\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className={classnames(s.input, s.email)}\r\n          placeholder=\"Email\"\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          className={classnames(s.input, s.password)}\r\n          placeholder=\"New Password\"\r\n        />\r\n        <input type=\"submit\" className={s.submit} value=\"Update Settings\" />\r\n      </form>\r\n      <button className={s.logout} onClick={logout}>\r\n        Or click here to logout\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import React, { useEffect } from 'react';\r\nimport { stringify } from 'query-string';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './UserArticles.module.scss';\r\n\r\nimport { ErrorMessage, Feed, Loading, Pagination } from '../../../../components';\r\nimport { getPaginator, limit } from '../../../../utils';\r\nimport useFetch from '../../../../hooks/useFetch';\r\n\r\nconst UserArticles = ({ location, isFavorites, username }) => {\r\n  const { offset, currentPage } = getPaginator(location.search);\r\n  const stringifyParams = stringify({ limit, offset });\r\n\r\n  const apiUrl = `/articles?${isFavorites ? 'favorited' : 'author'}=${username}&${stringifyParams}`;\r\n  const [{ response, isLoading, error }, doFetch] = useFetch(apiUrl);\r\n\r\n  useEffect(() => {\r\n    doFetch();\r\n  }, [doFetch, currentPage, apiUrl]);\r\n\r\n  return (\r\n    <div className={s.articles}>\r\n      {isLoading && <Loading />}\r\n      {error && <ErrorMessage />}\r\n      {!isLoading && response && (\r\n        <>\r\n          <Feed articles={response.articles} />\r\n          <Pagination\r\n            total={response.articlesCount}\r\n            limit={limit}\r\n            url={location.pathname}\r\n            currentPage={currentPage}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nUserArticles.propTypes = {\r\n  username: PropTypes.string.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  isFavorites: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default UserArticles;\r\n","import React, { useEffect, useContext } from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport classnames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './UserProfile.module.scss';\r\n\r\nimport useFetch from '../../hooks/useFetch';\r\nimport { AddToFollowing, ErrorMessage, Loading } from '../../components';\r\nimport { UserArticles } from './components';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { isAuthor } from '../../utils';\r\n\r\nconst UserProfile = ({ match, location }) => {\r\n  const isFavorites = location.pathname.includes('favorites');\r\n  const apiUrl = `/profiles/${match.params.slug}`;\r\n  const [{ response, error, isLoading }, doFetch] = useFetch(apiUrl);\r\n  const [currentUserState] = useContext(CurrentUserContext);\r\n\r\n  useEffect(() => {\r\n    doFetch();\r\n  }, [doFetch, match.params.slug]);\r\n\r\n  if (error) {\r\n    return <ErrorMessage />;\r\n  }\r\n\r\n  if (isLoading || !response) {\r\n    return <Loading />;\r\n  }\r\n\r\n  const { image, username, following, bio } = response.profile;\r\n\r\n  return (\r\n    <div className={s.profile}>\r\n      <div className={s.banner}>\r\n        <div className={s.userPhoto}>\r\n          <img src={image} alt=\"\" className={s.img} />\r\n        </div>\r\n        <h3 className={s.name}>{username}</h3>\r\n        <div className={s.bio}>\r\n          <p>{bio}</p>\r\n        </div>\r\n        <span className={s.btn}>\r\n          {isAuthor(currentUserState, username) ? (\r\n            <Link to={`/settings`} className={s.btnEdit}>\r\n              <i className={classnames('fas fa-cog', s.icon)}></i>\r\n              Edit Profile Settings\r\n            </Link>\r\n          ) : (\r\n            <AddToFollowing isFollowing={following} userSlug={username} />\r\n          )}\r\n        </span>\r\n      </div>\r\n\r\n      <div className={s.toggler}>\r\n        <ul className={s.links}>\r\n          <li className={s.li}>\r\n            <NavLink\r\n              to={apiUrl}\r\n              className={s.link}\r\n              activeStyle={{ borderBottom: '2px solid green', color: 'green' }}\r\n              exact>\r\n              User's Posts\r\n            </NavLink>\r\n          </li>\r\n          <li className={s.li}>\r\n            <NavLink\r\n              to={apiUrl + '/favorites'}\r\n              className={s.link}\r\n              activeStyle={{ borderBottom: '2px solid green', color: 'green' }}>\r\n              Favorited Posts\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <UserArticles username={username} location={location} isFavorites={isFavorites} />\r\n    </div>\r\n  );\r\n};\r\n\r\nUserProfile.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default UserProfile;\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { stringify } from 'query-string';\r\n\r\nimport s from './GlobalFeed.module.scss';\r\n\r\nimport {\r\n  Feed,\r\n  Pagination,\r\n  PopularTags,\r\n  Loading,\r\n  ErrorMessage,\r\n  FeedToggler,\r\n} from '../../components';\r\nimport useFetch from '../../hooks/useFetch';\r\nimport { getPaginator, limit } from '../../utils';\r\n\r\nconst TagFeed = ({ location, match }) => {\r\n  const tagName = match.params.slug;\r\n\r\n  const { offset, currentPage } = getPaginator(location.search);\r\n  const stringifyParams = stringify({ limit, offset, tag: tagName });\r\n  const apiUrl = `/articles?${stringifyParams}`;\r\n\r\n  const [{ response, isLoading, error }, doFetch] = useFetch(apiUrl);\r\n  useEffect(() => {\r\n    doFetch();\r\n  }, [doFetch, currentPage, tagName]);\r\n\r\n  return (\r\n    <div className={s.homepage}>\r\n      <div className={s.banner}>\r\n        <h1 className={s.title}>Medium clone</h1>\r\n        <p>A place to share knowledge</p>\r\n      </div>\r\n\r\n      <div className={s.content}>\r\n        <div>\r\n          <FeedToggler tagName={tagName} />\r\n          <div className={s.articles}>\r\n            {isLoading && <Loading />}\r\n            {error && <ErrorMessage />}\r\n            {!isLoading && response && (\r\n              <>\r\n                <Feed articles={response.articles} />\r\n                <Pagination\r\n                  total={response.articlesCount}\r\n                  limit={limit}\r\n                  url={match.url}\r\n                  currentPage={currentPage}\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <PopularTags />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nTagFeed.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default TagFeed;\r\n","import React from 'react';\nimport { Switch, Route, BrowserRouter as Router } from 'react-router-dom';\n\nimport { TopBar, ErrorBoundry } from './components';\nimport { CurrentUserProvider } from './contexts/CurrentUserContext';\nimport CurrentUserChecker from './utils/CurrentUserChecker';\n\nimport {\n  Article,\n  GlobalFeed,\n  TagFeed,\n  Authentication,\n  CreateArticle,\n  EditArticle,\n  Settings,\n  UserProfile,\n} from './pages';\n\nconst App = () => {\n  return (\n    <ErrorBoundry>\n      <CurrentUserProvider>\n        <CurrentUserChecker>\n          <Router>\n            <div className=\"container\">\n              <TopBar />\n              <Switch>\n                <Route path=\"/\" exact component={GlobalFeed} />\n                <Route path=\"/articles/new\" component={CreateArticle} />\n                <Route path=\"/articles/:slug/edit\" component={EditArticle} />\n                <Route path=\"/settings\" component={Settings} />\n                <Route path=\"/feed\" component={GlobalFeed} />\n                <Route path=\"/tags/:slug\" component={TagFeed} />\n                <Route path=\"/login\" component={Authentication} />\n                <Route path=\"/register\" component={Authentication} />\n                <Route path=\"/articles/:slug/\" component={Article} />\n                <Route path=\"/profiles/:slug\" component={UserProfile} />\n                <Route path=\"/profiles/:slug/favorites\" component={UserProfile} />\n                <Route render={() => <h2>Page not fount</h2>} />\n              </Switch>\n            </div>\n          </Router>\n        </CurrentUserChecker>\n      </CurrentUserProvider>\n    </ErrorBoundry>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"banner\":\"GlobalFeed_banner__1T8OO\",\"origin\":\"GlobalFeed_origin__32sUV\",\"title\":\"GlobalFeed_title__2u36j\",\"content\":\"GlobalFeed_content__2OhJ6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"article\":\"Feed_article__2iXG2\",\"meta\":\"Feed_meta__2fraO\",\"row\":\"Feed_row__tvbz8\",\"photo\":\"Feed_photo__3mqCc\",\"info\":\"Feed_info__1uyL3\",\"author\":\"Feed_author__fQXqc\",\"title\":\"Feed_title__YAZll\",\"description\":\"Feed_description__3NVAT\",\"more\":\"Feed_more__8nCQN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"TopBar_navbar__1GAsD\",\"logo\":\"TopBar_logo__1MnC_\",\"link\":\"TopBar_link__2fSSe\",\"photo\":\"TopBar_photo__2vV_w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"ArticleForm_page__3ivba\",\"form\":\"ArticleForm_form__3ArLt\",\"title\":\"ArticleForm_title__3oC7i\",\"body\":\"ArticleForm_body__1254-\",\"button\":\"ArticleForm_button__1IomL\",\"tagList\":\"ArticleForm_tagList__19JtM\",\"tag\":\"ArticleForm_tag__2NExF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentsPage\":\"ArticleComments_commentsPage__wuJLI\",\"comments\":\"ArticleComments_comments__2G-y0\",\"comment\":\"ArticleComments_comment__2kTEf\",\"commentBody\":\"ArticleComments_commentBody__2nhED\",\"commentMeta\":\"ArticleComments_commentMeta__2N8ph\",\"img\":\"ArticleComments_img__19JDS\",\"name\":\"ArticleComments_name__1NHwc\",\"delete\":\"ArticleComments_delete__2DICL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"FeedToggler_list__12fN6\",\"link\":\"FeedToggler_link__3xsso\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postBody\":\"PostCommentForm_postBody__306CU\",\"postMeta\":\"PostCommentForm_postMeta__2vId8\",\"postImg\":\"PostCommentForm_postImg__3x8qH\",\"postBtn\":\"PostCommentForm_postBtn__37sI2\",\"notLogged\":\"PostCommentForm_notLogged__3kIaT\",\"link\":\"PostCommentForm_link__NoZa9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"Authentication_auth__2ZhOk\",\"title\":\"Authentication_title__ypfxe\",\"ref\":\"Authentication_ref__ARRd0\",\"form\":\"Authentication_form__d5e3I\",\"input\":\"Authentication_input__XnF3G\",\"submit\":\"Authentication_submit__iKuiG\",\"disabled\":\"Authentication_disabled__vJ2da\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"AddToFavorites_btn__1jzNZ\",\"btnGreen\":\"AddToFavorites_btnGreen__hmtFH\",\"icon\":\"AddToFavorites_icon__3teK_\",\"btnFavorited\":\"AddToFavorites_btnFavorited__3D4rJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"Pagination_list__1klkw\",\"link\":\"Pagination_link__Mwkjs\",\"active\":\"Pagination_active__mTnQP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"AddToFollowing_btn__eb1EZ\",\"icon\":\"AddToFollowing_icon__2ptju\",\"btnFollowing\":\"AddToFollowing_btnFollowing__lG2KL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"PopularTags_sidebar__P1i8K\",\"tagsList\":\"PopularTags_tagsList__7bZbN\",\"item\":\"PopularTags_item__3Ndjv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tagList\":\"TagList_tagList__3p7tK\",\"tag\":\"TagList_tag__22bhs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errors\":\"BackendErrorMessages_errors__1bapI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"banner\":\"Article_banner__1wZd4\",\"title\":\"Article_title__eHlwn\",\"meta\":\"Article_meta__1sfk2\",\"photo\":\"Article_photo__16ji4\",\"info\":\"Article_info__xg19B\",\"author\":\"Article_author__1KDu3\",\"content\":\"Article_content__2ysCh\",\"body\":\"Article_body__3vFFj\",\"row\":\"Article_row__2AkFj\",\"buttons\":\"Article_buttons__1DJv4\",\"btn\":\"Article_btn__2gm_X\",\"btnRed\":\"Article_btnRed__3Xmlw\",\"btnGreen\":\"Article_btnGreen__2GLfb\",\"icon\":\"Article_icon__jfdrq\",\"btnFavorited\":\"Article_btnFavorited__1fj2A\",\"btnFollowing\":\"Article_btnFollowing__7An5u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings\":\"Settings_settings__2Z0bt\",\"title\":\"Settings_title__17XyJ\",\"form\":\"Settings_form__3QME9\",\"input\":\"Settings_input__1csku\",\"imageUrl\":\"Settings_imageUrl__3Opfw\",\"bio\":\"Settings_bio__3y0R1\",\"submit\":\"Settings_submit__F0W_E\",\"logout\":\"Settings_logout__3Clg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__3pc7a\",\"banner\":\"UserProfile_banner__1Xdh0\",\"userPhoto\":\"UserProfile_userPhoto__Mps7-\",\"img\":\"UserProfile_img__1ktFx\",\"name\":\"UserProfile_name__3loKV\",\"bio\":\"UserProfile_bio__29FIz\",\"btn\":\"UserProfile_btn__3NuUI\",\"btnEdit\":\"UserProfile_btnEdit__2IVrB\",\"links\":\"UserProfile_links__2nqsl\",\"link\":\"UserProfile_link__2xzBb\",\"icon\":\"UserProfile_icon__78YFM\"};"],"sourceRoot":""}